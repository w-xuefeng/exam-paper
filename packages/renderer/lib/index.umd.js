!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).EPR={})}(this,function(e){const t="question",n="answer",r="title",o="description",s="blank",l="header",c="footer",a="inline",u="css",i=()=>{};function d(e){return void 0===e&&(e=""),"number"==typeof e&&(e=String(e)),document.createTextNode(e)}function f(e,t,n){const r=e();return t&&Object.entries(t).forEach(([e,t])=>{if("attrs"===e&&"object"==typeof t&&null!==t)Object.entries(t).forEach(([e,t])=>{r.setAttribute(e,t)});else if("on"===e&&"object"==typeof t&&null!==t)Object.entries(t).forEach(([e,t])=>{const n="function"==typeof t?t.bind(r):"object"==typeof t&&null!==t&&"event"in t&&"function"==typeof t.event?t.event.bind(r):"object"==typeof t&&null!==t&&"handleEvent"in t&&"function"==typeof t.handleEvent?t.handleEvent.bind(r):()=>{},o="object"==typeof t&&null!==t&&"option"in t?t.option:void 0;r.addEventListener(e,n,o)});else if("style"===e)if("object"==typeof t&&null!==t){const e="string"!=typeof(l=t)&&l?Object.entries(l).map(([e,t])=>{return`${n=e,n.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"")}:${t}`;var n}).join(";"):l;Reflect.set(r.style,"cssText",e)}else"string"==typeof t&&Reflect.set(r.style,"cssText",t);else"className"===e?(n=r,o=r.tagName,s=t,p(o)||function(e){return"svg"===e?.dataset?.domType||"svg"===e?.tagName}(n)?Reflect.set(n.className,"baseVal",s):Reflect.set(n,"className",s)):"attrs"!==e&&"on"!==e&&"style"!==e&&Reflect.set(r,e,t);var n,o,s,l}),n&&r.append(...Array.isArray(n)?n:[n]),r}function p(e){return"string"==typeof e&&("svg"===e||e.startsWith("SVG:"))}function E(e,t,n){return f(p(e)?()=>{const t=document.createElementNS("http://www.w3.org/2000/svg",e.replace(/^SVG:/,""));return t.setAttribute("data-dom-type","svg"),t}:()=>document.createElement(e),t,n)}function y(e){if(!e)return null;if("string"==typeof e)return E("style",null,d(e));if(!Object.keys(e).length)return null;function t(e){let n="";for(const[r,o]of Object.entries(e)){if("string"==typeof o||"number"==typeof o){n+=`${r.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${o};`}"object"==typeof o&&(n+=`${r} {${t(o)}}`)}return n.trim()}return E("style",null,d(function(e){let n="";for(const[r,o]of Object.entries(e))n+=`${r} {${t(o)}}`;return n.trim()}(e)))}function m(e,t=document.body){if(!e)return i;const n=function(e,t=document){return"string"==typeof e?t.querySelector(e):e}(t);if(!n)return i;n.append(e)}function b(e){const{value:t}="value"in e?e:{value:e};return t}function R(e,t,n){customElements.get(e)||customElements.define(e,t,n)}const T=e=>`exam-paper-${e}`,v={PAPER:T("container"),QUESTION:T("question"),ANSWER:T("answer"),TITLE:T("title"),DESCRIPTION:T("description"),BLANK:T("blank"),HEADER:T("header"),FOOTER:T("footer"),STYLED:T("styled-content"),QUESTION_ORDER_NUMBER:T("question-order-number"),QUESTION_SCORE:T("question-score")};var O=class extends HTMLElement{constructor(){super()}connectedCallback(){}};function S(e,t=v.STYLED,n){R(v.STYLED,O);const{type:r,value:o}=e.style,s=r===a?o:void 0,l=r===u?y(o):null;if(l){const r=E(t,n);return r.attachShadow({mode:"open"}).append(l,E("main",{innerHTML:e.value})),r}return E(t,{...n,innerHTML:e.value,style:s})}var N=class extends HTMLElement{constructor(){super()}connectedCallback(){}};function h(e){R(v.STYLED,N);const t=b(e);return"string"==typeof t?E(v.ANSWER,{innerHTML:t}):S(t,v.ANSWER)}var L=class extends HTMLElement{constructor(){super()}connectedCallback(){}},g=class extends HTMLElement{constructor(){super()}connectedCallback(){}},k=class extends HTMLElement{constructor(){super()}connectedCallback(){}};function C(e){R(v.QUESTION,L),R(v.QUESTION_ORDER_NUMBER,g),R(v.QUESTION_SCORE,k);const{orderNumber:t,title:n,description:r,options:o,score:s,answer:l}=b(e),c=S(n),a=t?E(v.QUESTION_ORDER_NUMBER,{textContent:t}):null,u=s?E(v.QUESTION_SCORE,{textContent:s.formatter?s.formatter.replace("%d",`${s.value}`):`${s.value}`}):null,i=r?S(r):null,d=o?.map(e=>S(e)),f=l?h(l.value):null,p=[a,c,u].filter(Boolean),y=[a||u?E("header",{style:{display:"inline-flex",alignItems:"baseline",gap:"0.5em"}},p):c,i,d,f].filter(Boolean).flat();return E(v.QUESTION,null,y)}function I(e){const{value:t}=e,{type:n}=t;return C(t)}var A=class extends HTMLElement{constructor(){super()}connectedCallback(){}};function x(e){R(v.TITLE,A);return S(b(e),v.TITLE)}var D=class extends HTMLElement{constructor(){super()}connectedCallback(){}};function H(e){R(v.DESCRIPTION,D);return S(b(e),v.DESCRIPTION)}var M=class extends HTMLElement{constructor(){super()}connectedCallback(){}};function j(e){return R(v.BLANK,M),S({value:"",style:e.style},v.BLANK)}var U=class extends HTMLElement{constructor(){super()}connectedCallback(){}};function $(e){R(v.HEADER,U);return S(b(e),v.HEADER)}var w=class extends HTMLElement{constructor(){super()}connectedCallback(){}};function B(e){R(v.FOOTER,w);return S(b(e),v.FOOTER)}var P=class extends HTMLElement{type;constructor(){super()}connectedCallback(){const e=Object.fromEntries(Array.from(this.attributes).map(e=>{return[e.name,(t=e.value,"null"===t?null:"'null'"===t||'"null"'===t?"null":"undefined"!==t?"'undefined'"===t||'"undefined"'===t?"undefined":"true"===t||("'true'"===t||'"true"'===t?"true":"false"!==t&&("'false'"===t||'"false"'===t?"false":/^\d+$/.test(t)?Number(t):t)):void 0)];var t}));"string"==typeof e.type&&e.type&&(this.type=e.type)}};function Q(e){R(v.PAPER,P);const{paperSize:t,value:{style:n}}=e;return S({value:"",style:n},v.PAPER,{attrs:{type:t.name}})}function _(){return{[v.PAPER]:{display:"block"},[v.QUESTION]:{display:"block"},[v.ANSWER]:{display:"block"},[v.TITLE]:{display:"block"},[v.DESCRIPTION]:{display:"block"},[v.BLANK]:{display:"block"},[v.HEADER]:{display:"block"},[v.FOOTER]:{display:"block"},[v.STYLED]:{display:"block"},[v.QUESTION_ORDER_NUMBER]:{display:"block"},[v.QUESTION_SCORE]:{display:"block"}}}function q(){const e="exam-paper-element-agent-style-sheet";if(document.getElementById(e))return;const t=y(_());t&&(t.id=e,function(e,t=`global-custome-style-${Date.now()}`,n=document){e.id=e.id||t,n===document?n.head.appendChild(e):n.insertBefore(e,n.firstChild)}(t))}function W(e){switch(e.type){case t:return I(e);case r:return x(e);case o:return H(e);case s:return j(e);case l:return $(e);case c:return B(e);case n:return h(e);default:return null}}e.answerRenderer=h,e.applyElementDefaultStyles=q,e.blankRenderer=j,e.descriptionRenderer=H,e.elementDefaultStyles=_,e.examPaperRenderer=function(e){const{value:{value:t}}=e,n=Q(e),r=[];if(Array.isArray(t)){const e=t.map(W).filter(Boolean);r.push(...e)}else{const{header:e,title:n,description:o,main:s,answer:l,footer:c}=t;e&&r.push($(e)),n&&r.push(x(n)),o&&r.push(H(o)),s&&r.push(...s.map(W).filter(Boolean)),l&&r.push(...l.map(h)),c&&r.push(B(c))}return n.append(...r),{paper:n,mounted:(e=document.body)=>{q(),m(n,e)}}},e.footerRenderer=B,e.headerRenderer=$,e.matchRender=W,e.paperRenderer=Q,e.questionRenderer=I,e.styledContentRenderer=S,e.titleRenderer=x});